<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Bird Flu</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<script src="http://d3js.org/d3.v3.min.js"></script>

<body>
    <h1>South Dakota example</h1>
    <style>
        .chart rect {
            fill: steelblue;
        }
        
        .chart text {
            fill: black;
            font: 10px sans-serif;
            text-anchor: middle;
        }
    </style>
    <svg class="chart"></svg>
    <script type="text/javascript">
        var SoDak = [
            {
                county: 'Moody',
                flockSize: 52000
      },
            {
                county: 'Moody',
                flockSize: 642700
      },
            {
                county: 'Yankton',
                flockSize: 70600
      },
            {
                county: "Hutchinson",
                flockSize: 70600
      },
            {
                county: "Spink",
                flockSize: 33300
      },
            {
                county: "Roberts",
                flockSize: 66600
      },
            {
                county: "McPherson",
                flockSize: 55200
      },
            {
                county: "McCook",
                flockSize: 54700
      },
            {
                county: "Kingsbury",
                flockSize: 71900
      },
            {
                county: "Beadle",
                flockSize: 50600
      }
].sort(function (obj1, obj2) {
            // Ascending: first flock less than the previous
            return obj1.flockSize - obj2.flockSize;
        });
        var margin = {
                top: 20,
                right: 30,
                bottom: 30,
                left: 20,
            },
            width = 960 - margin.left - margin.right,
            height = 1000 - margin.top - margin.bottom,
            barWidth = width / SoDak.length;
        //change attributes of chart
        var chart = d3.select(".chart")
            .attr({
                //preserveAspectRatio: "xMinYMin slice",
                //viewBox: "0 0" + " " + 960 + " " + 1000,
                width: width + margin.left + margin.right,
                height: height + margin.top + margin.bottom
            })
            .append("g")
            .attr({
                transform: "translate(" + margin.left + "," + margin.top + ")"
            });
        //make rectangles
        var yScale = d3.scale.linear()
            .domain([0, d3.max(SoDak, function (d) {
                return d.flockSize;
            }) + 100])
            .range([height, 0]);
        var xScale = d3.scale.ordinal()
            .domain(SoDak.map(function (d) {
                return d.county;
            }))
            .rangeRoundBands([0, width], 0.1);
        var yAxis = d3.svg.axis()
            .scale(yScale)
            .orient("left");
        var xAxis = d3.svg.axis()
            .scale(xScale)
            .orient("bottom");

        var bar = chart.selectAll("g")
            .data(SoDak)
            .enter().append("g");
        //add rectangles
        bar.append("rect")
            .attr({
                class: "flockSize",
                y: 0,
                x: 0,
                width: barWidth,
                height: function (d) {
                    return height - yScale(d.flockSize);
                },
                fill: "#FF514B",
                transform: function (d) {
                    return "translate(" + xScale(d.county) + ",0)";
                },
            })
            //size labels


        function type(d) {
            d.flockSize = +d.flockSize;
            return d;
        }
    </script>

</body>

</html>